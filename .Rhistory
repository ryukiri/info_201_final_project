library(plotly)
# build Bar chart function
library(plotly)
library(dplyr)
# draw the bar chart with the specified grams for each ingredients for a specific Cereal
# Return the bar chart
BuildBar <- function(the.data, the.text, the.color){
# select needed information from the chart by using the input data
needed.data <- the.data %>% filter(name == the.text)
#draw the bar chart
p <- plot_ly(
needed.data,
type = 'bar',
x = needed.data[2:6]%>%colnames(),
y = ~needed.data[2:6]%>%as.numeric(),
marker = list(color = the.color))
%>%layout(barmode = 'stack', yaxis = list(title = 'grams'), xaxis = list(title = 'Ingredients'))
return(p)
}
# build Bar chart function
library(plotly)
library(dplyr)
# draw the bar chart with the specified grams for each ingredients for a specific Cereal
# Return the bar chart
BuildBar <- function(the.data, the.text, the.color){
# select needed information from the chart by using the input data
needed.data <- the.data %>% filter(name == the.text)
#draw the bar chart
p <- plot_ly(
needed.data,
type = 'bar',
x = needed.data[2:6]%>%colnames(),
y = ~needed.data[2:6]%>%as.numeric(),
marker = list(color = the.color))%>%layout(barmode = 'stack', yaxis = list(title = 'grams'), xaxis = list(title = 'Ingredients'))
return(p)
}
shiny::runApp('Documents/college/INFO201/a8-building-apps-ZKeiLin')
runApp('Documents/college/INFO201/a8-building-apps-ZKeiLin')
Merge.feature.year <- function(the.features, feature){
the.year<- as.numeric(gsub("[^0-9]", "", the.features))
#deparse(substitute(the.features)), perl=TRUE))
the <- get(paste0('features.', the.year))
name <- toString(the.year)
the.x = get(the.features)$X
year = data.frame(get(the.features)[[feature]], X = the.x)
colnames(year)[1] <- toString(the.year)
return(year)
}
ab <- lapply(names(all), Create, 'danceability')%>%Reduce(function(...) merge(..., by='X', all=T), ab)
Merge.feature.year <- function(the.features, feature){
the.year<- as.numeric(gsub("[^0-9]", "", the.features))
#deparse(substitute(the.features)), perl=TRUE))
the <- get(paste0('features.', the.year))
name <- toString(the.year)
the.x = get(the.features)$X
year = data.frame(get(the.features)[[feature]], X = the.x)
colnames(year)[1] <- toString(the.year)
return(year)
}
all <- list(
'features.2008' = features.2008,
'features.2009' =features.2009,
'features.2010' =features.2010,
'features.2011' =features.2011,
'features.2012' =features.2012
)
#
#
and putting them into respective data frames
features.2016 <- read.csv("features/features.2016.csv")
features.2015 <- read.csv("features/features.2015.csv")
features.2014 <- read.csv("features/features.2014.csv")
features.2013 <- read.csv("features/features.2013.csv")
features.2012 <- read.csv("features/features.2012.csv")
features.2011 <- read.csv("features/features.2011.csv")
features.2010 <- read.csv("features/features.2010.csv")
features.2009 <- read.csv("features/features.2009.csv")
features.2008 <- read.csv("features/features.2008.csv")
library(devtools)
library(Rspotify)
library(dplyr)
library(knitr)
shinyServer(function(input, output) {
## Authorizes Spotify API with keys
keys <- spotifyOAuth("Info 201","ae706b417cc645f78c559186204dadd4","5f5769652ae24ceca43e05074b8b84eb")
source("functions/GetSongData.R")
source("functions/combine.features.by.year.R")
output$rolePlot <- renderPlot({
## Read in songs for each year
songs.2016 <- read.csv("Songs/Songs - 2016.csv")
songs.2015 <- read.csv("Songs/Songs - 2015.csv")
songs.2014 <- read.csv("Songs/Songs - 2014.csv")
songs.2013 <- read.csv("Songs/Songs - 2013.csv")
songs.2012 <- read.csv("Songs/Songs - 2012.csv")
songs.2011 <- read.csv("Songs/Songs - 2011.csv")
songs.2010 <- read.csv("Songs/Songs - 2010.csv")
songs.2009 <- read.csv("Songs/Songs - 2009.csv")
songs.2008 <- read.csv("Songs/Songs - 2008.csv")
## Grabbing audio features for the years and putting them into respective data frames
features.2016 <- read.csv("features/features.2016.csv")
features.2015 <- read.csv("features/features.2015.csv")
features.2014 <- read.csv("features/features.2014.csv")
features.2013 <- read.csv("features/features.2013.csv")
features.2012 <- read.csv("features/features.2012.csv")
features.2011 <- read.csv("features/features.2011.csv")
features.2010 <- read.csv("features/features.2010.csv")
features.2009 <- read.csv("features/features.2009.csv")
features.2008 <- read.csv("features/features.2008.csv")
features.2016 <- read.csv("features/features.2016.csv")
shiny::runApp('Documents/college/INFO201/info_201_final_project')
getwd()
setwd('~/Documents/college/INFO201/info_201_final_project')
ls
songs.2015 <- read.csv("Songs/Songs - 2015.csv")
songs.2014 <- read.csv("Songs/Songs - 2014.csv")
songs.2013 <- read.csv("Songs/Songs - 2013.csv")
songs.2012 <- read.csv("Songs/Songs - 2012.csv")
songs.2011 <- read.csv("Songs/Songs - 2011.csv")
songs.2010 <- read.csv("Songs/Songs - 2010.csv")
songs.2009 <- read.csv("Songs/Songs - 2009.csv")
songs.2008 <- read.csv("Songs/Songs - 2008.csv")
## Grabbing audio features for the years and putting them into respective data frames
features.2016 <- read.csv("features/features.2016.csv")
features.2015 <- read.csv("features/features.2015.csv")
features.2014 <- read.csv("features/features.2014.csv")
features.2013 <- read.csv("features/features.2013.csv")
features.2012 <- read.csv("features/features.2012.csv")
features.2011 <- read.csv("features/features.2011.csv")
features.2010 <- read.csv("features/features.2010.csv")
features.2009 <- read.csv("features/features.2009.csv")
features.2008 <- read.csv("features/features.2008.csv")
## all the features and years list
all.features <- list(
'features.2008' = features.2008,
'features.2009' = features.2009,
'features.2010' = features.2010,
'features.2011' = features.2011,
'features.2012' = features.2012,
'features.2013' = features.2013,
'features.2014' = features.2014,
'features.2015' = features.2015,
'features.2016' = features.2016
)
runApp()
feature.years <- features.all.songs%>%select(danceability, Year)
features.all.songs <- read.csv("songsMerged/songs.merged.all.csv")
dat <- data.frame(
year = factor(c(2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016), levels=c(2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016)),
stat_average = c(features.2008.danceability,
features.2009.danceability,
features.2010.danceability,
features.2011.danceability,
features.2012.danceability,
features.2013.danceability,
features.2014.danceability,
features.2015.danceability,
features.2016.danceability),
all.years.feature <-Reduce(function(...) merge(..., by='X', all=T), lapply(names(all.features), Merge.feature.year, 'danceability')),
feature.years <- features.all.songs%>%select(danceability, Year)
)
feature.years <- features.all.songs%>%select(danceability, Year)
View(feature.years)
runApp()
runApp()
getwd()
runApp()
runApp()
runApp()
runApp()
runApp()
feature.years <- features.all.songs%>%select(feature = danceability, Year)
View(feature.years)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
ab <- qqplot(x = feature.years$Year, y = feature.years$feature, col = feature.years$feature)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
features.all.songs <- read.csv("songsMerged/songs.merged.all.csv")
View(feature.years)
features.all.songs <- read.csv("songsMerged/songs.merged.all.csv")
View(features.all.songs)
runApp()
